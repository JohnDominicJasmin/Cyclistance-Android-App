Index: app/src/main/java/com/example/cyclistance/navigation/Screens.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.cyclistance.navigation\n\nsealed class Screens {\n\n\n    open class Authentication(val screenRoute: String = \"\") : Screens() {\n        companion object {\n            const val ROUTE = \"authentication\"\n        }\n\n        object SignInScreen : Authentication(screenRoute = \"sign_in_screen\")\n        object SignUpScreen : Authentication(screenRoute = \"sign_up_screen\")\n        object EmailAuthScreen : Authentication(screenRoute = \"email_auth_screen\")\n    }\n\n    open class EmergencyCall(val screenRoute: String = \"\") : Screens() {\n        companion object {\n            const val ROUTE = \"emergency_call\"\n        }\n\n        object EmergencyCallScreen : EmergencyCall(screenRoute = \"emergency_call_screen\")\n        object AddNewContact : EmergencyCall(screenRoute = \"emergency_add_new_contact\")\n    }\n\n    open class Messaging(val screenRoute: String = \"\") : Screens() {\n        companion object {\n            const val ROUTE = \"messaging\"\n        }\n\n        object MessagingScreen : Messaging(screenRoute = \"messaging_screen\")\n        object ConversationScreen : Messaging(screenRoute = \"messaging_conversation_screen\")\n    }\n\n    open class OnBoarding(val screenRoute: String = \"\") : Screens() {\n        companion object {\n            const val ROUTE = \"on_boarding\"\n        }\n\n        object IntroSliderScreen : OnBoarding(screenRoute = \"intro_slider_screen\")\n    }\n\n    open class Mapping(val screenRoute: String = \"\") : Screens() {\n        companion object {\n            const val ROUTE = \"mapping\"\n        }\n\n        object MappingScreen : Mapping(screenRoute = \"mapping_screen\")\n        object CancellationScreen : Mapping(screenRoute = \"cancellation_screen\")\n        object ConfirmDetailsScreen : Mapping(screenRoute = \"confirm_details_screen\")\n    }\n\n    open class Settings(val screenRoute: String = \"\") : Screens() {\n\n        companion object {\n            const val ROUTE = \"settings\"\n        }\n\n        object ChangePasswordScreen : Settings(screenRoute = \"change_password_screen\")\n        object EditProfileScreen : Settings(screenRoute = \"edit_profile_screen\")\n        object SettingScreen : Settings(screenRoute = \"setting_screen\")\n    }\n\n\n    open class RideHistory(val screenRoute: String = \"\") : Screens() {\n        companion object {\n            const val ROUTE = \"ride_history\"\n        }\n\n        object RideHistoryScreen : RideHistory(screenRoute = \"ride_history_screen\")\n        object RideHistoryDetailsScreen : RideHistory(screenRoute = \"ride_history_details_screen\")\n    }\n\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/navigation/Screens.kt b/app/src/main/java/com/example/cyclistance/navigation/Screens.kt
--- a/app/src/main/java/com/example/cyclistance/navigation/Screens.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ b/app/src/main/java/com/example/cyclistance/navigation/Screens.kt	(date 1689293161784)
@@ -28,7 +28,6 @@
         }
 
         object MessagingScreen : Messaging(screenRoute = "messaging_screen")
-        object ConversationScreen : Messaging(screenRoute = "messaging_conversation_screen")
     }
 
     open class OnBoarding(val screenRoute: String = "") : Screens() {
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/event/MessageUiEvent.kt
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/event/MessageUiEvent.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/event/MessageUiEvent.kt
deleted file mode 100644
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/event/MessageUiEvent.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ /dev/null	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
@@ -1,5 +0,0 @@
-package com.example.cyclistance.feature_messaging.presentation.messages_list.event
-
-sealed class MessageUiEvent {
-    data class OnMessageClicked(val messageId: String) : MessageUiEvent()
-}
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/event/MessagingConversationUiEvent.kt
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/event/MessagingConversationUiEvent.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/event/MessagingConversationUiEvent.kt
deleted file mode 100644
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/event/MessagingConversationUiEvent.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ /dev/null	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
@@ -1,12 +0,0 @@
-package com.example.cyclistance.feature_messaging.presentation.messaging_conversation.event
-
-import androidx.compose.ui.text.input.TextFieldValue
-
-sealed class MessagingConversationUiEvent {
-    object ToggleMessageArea : MessagingConversationUiEvent()
-    object ResetSelectedIndex : MessagingConversationUiEvent()
-    object CloseMessagingConversationScreen : MessagingConversationUiEvent()
-    data class SelectChatItem(val index: Int) : MessagingConversationUiEvent()
-    data class OnChangeMessage(val message: TextFieldValue) : MessagingConversationUiEvent()
-
-}
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationScreen.kt
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationScreen.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationScreen.kt
deleted file mode 100644
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationScreen.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ /dev/null	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
@@ -1,93 +0,0 @@
-import androidx.activity.compose.BackHandler
-import androidx.compose.foundation.layout.PaddingValues
-import androidx.compose.foundation.layout.padding
-import androidx.compose.runtime.Composable
-import androidx.compose.runtime.getValue
-import androidx.compose.runtime.mutableStateOf
-import androidx.compose.runtime.remember
-import androidx.compose.runtime.saveable.rememberSaveable
-import androidx.compose.runtime.setValue
-import androidx.compose.ui.Modifier
-import androidx.compose.ui.text.input.TextFieldValue
-import androidx.lifecycle.compose.collectAsStateWithLifecycle
-import androidx.lifecycle.viewmodel.compose.viewModel
-import androidx.navigation.NavController
-import com.example.cyclistance.feature_messaging.presentation.messaging_conversation.MessagingConversationViewModel
-import com.example.cyclistance.feature_messaging.presentation.messaging_conversation.components.MessagingConversationContent
-import com.example.cyclistance.feature_messaging.presentation.messaging_conversation.event.MessagingConversationUiEvent
-import com.example.cyclistance.feature_messaging.presentation.messaging_conversation.state.MessagingConversationUiState
-
-@Composable
-fun MessagingConversationScreen(
-    viewModel: MessagingConversationViewModel = viewModel(),
-    navController: NavController,
-    paddingValues: PaddingValues) {
-    val state by viewModel.state.collectAsStateWithLifecycle()
-    var uiState by rememberSaveable { mutableStateOf(MessagingConversationUiState()) }
-
-    val onToggleExpand = remember {
-        {
-            uiState = uiState.copy(
-                messageAreaExpanded = !uiState.messageAreaExpanded
-            )
-        }
-    }
-    val onChangeValueMessage = remember<(TextFieldValue) -> Unit> {
-        {
-            uiState = uiState.copy(
-                message = it
-            )
-        }
-    }
-
-    val onClickChatItem = remember {
-        { index: Int ->
-            uiState = uiState.copy(
-                chatItemSelectedIndex = if (uiState.chatItemSelectedIndex == index) {
-                    -1
-                } else {
-                    index
-                })
-        }
-    }
-
-    val resetSelectedIndex = remember {
-        {
-            uiState = uiState.copy(
-                chatItemSelectedIndex = -1
-            )
-        }
-    }
-
-
-    BackHandler(enabled = true, onBack = {
-        if (uiState.messageAreaExpanded) {
-            onToggleExpand()
-        } else {
-            navController.popBackStack()
-        }
-    })
-
-    val onCloseMessageConversationScreen = remember {
-        {
-            navController.popBackStack()
-        }
-    }
-
-
-
-    MessagingConversationContent(
-        modifier = Modifier.padding(paddingValues),
-        uiState = uiState,
-        state = state,
-        event = { event ->
-            when (event) {
-                is MessagingConversationUiEvent.ToggleMessageArea -> onToggleExpand()
-                is MessagingConversationUiEvent.ResetSelectedIndex -> resetSelectedIndex()
-                is MessagingConversationUiEvent.SelectChatItem -> onClickChatItem(event.index)
-                is MessagingConversationUiEvent.OnChangeMessage -> onChangeValueMessage(event.message)
-                is MessagingConversationUiEvent.CloseMessagingConversationScreen -> onCloseMessageConversationScreen()
-            }
-        }
-    )
-}
\ No newline at end of file
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationViewModel.kt
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationViewModel.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationViewModel.kt
deleted file mode 100644
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/MessagingConversationViewModel.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ /dev/null	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
@@ -1,11 +0,0 @@
-package com.example.cyclistance.feature_messaging.presentation.messaging_conversation
-
-import androidx.lifecycle.ViewModel
-import com.example.cyclistance.feature_messaging.presentation.messaging_conversation.state.MessagingConversationState
-import kotlinx.coroutines.flow.MutableStateFlow
-import kotlinx.coroutines.flow.asStateFlow
-
-class MessagingConversationViewModel : ViewModel() {
-    private val _state = MutableStateFlow(MessagingConversationState())
-    val state = _state.asStateFlow()
-}
\ No newline at end of file
Index: app/src/main/java/com/example/cyclistance/navigation/nav_graph/MessagingGraph.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.cyclistance.navigation.nav_graph\n\nimport MessagingConversationScreen\nimport androidx.compose.foundation.layout.PaddingValues\nimport androidx.navigation.NavController\nimport androidx.navigation.NavGraphBuilder\nimport androidx.navigation.compose.composable\nimport androidx.navigation.navigation\nimport com.example.cyclistance.feature_messaging.presentation.messages_list.MessagingScreen\nimport com.example.cyclistance.navigation.Screens\n\nfun NavGraphBuilder.messagingGraph(\n    navController: NavController,\n    paddingValues: PaddingValues) {\n    navigation(\n        startDestination = Screens.Messaging.MessagingScreen.screenRoute,\n        route = Screens.Messaging.ROUTE\n    ) {\n        composable(Screens.Messaging.MessagingScreen.screenRoute) {\n            MessagingScreen(\n                navController = navController,\n                paddingValues = paddingValues\n            )\n        }\n\n        composable(Screens.Messaging.ConversationScreen.screenRoute) {\n            MessagingConversationScreen(\n                navController = navController,\n                paddingValues = paddingValues)\n        }\n    }\n}\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/navigation/nav_graph/MessagingGraph.kt b/app/src/main/java/com/example/cyclistance/navigation/nav_graph/MessagingGraph.kt
--- a/app/src/main/java/com/example/cyclistance/navigation/nav_graph/MessagingGraph.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ b/app/src/main/java/com/example/cyclistance/navigation/nav_graph/MessagingGraph.kt	(date 1689293161771)
@@ -1,6 +1,5 @@
 package com.example.cyclistance.navigation.nav_graph
 
-import MessagingConversationScreen
 import androidx.compose.foundation.layout.PaddingValues
 import androidx.navigation.NavController
 import androidx.navigation.NavGraphBuilder
@@ -23,11 +22,6 @@
             )
         }
 
-        composable(Screens.Messaging.ConversationScreen.screenRoute) {
-            MessagingConversationScreen(
-                navController = navController,
-                paddingValues = paddingValues)
-        }
     }
 }
 
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/MessagingViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.cyclistance.feature_messaging.presentation.messages_list\n\nimport androidx.lifecycle.ViewModel\n\nclass MessagingViewModel : ViewModel(\n\n)
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/MessagingViewModel.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/MessagingViewModel.kt
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/MessagingViewModel.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messages_list/MessagingViewModel.kt	(date 1689292890573)
@@ -1,7 +1,14 @@
 package com.example.cyclistance.feature_messaging.presentation.messages_list
 
+import androidx.lifecycle.SavedStateHandle
 import androidx.lifecycle.ViewModel
+import com.example.cyclistance.feature_messaging.presentation.messaging_main_screen.state.MessagingState
+import kotlinx.coroutines.flow.MutableStateFlow
+import kotlinx.coroutines.flow.asStateFlow
 
-class MessagingViewModel : ViewModel(
-
-)
\ No newline at end of file
+class MessagingViewModel(
+    private val savedStateHandle: SavedStateHandle,
+) : ViewModel() {
+    private val _state = MutableStateFlow(MessagingState())
+    val state = _state.asStateFlow()
+}
\ No newline at end of file
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagignConversationState.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagignConversationState.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/state/MessagingState.kt
rename from app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagignConversationState.kt
rename to app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/state/MessagingState.kt
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagignConversationState.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/state/MessagingState.kt	(date 1689293152241)
@@ -1,12 +1,14 @@
-package com.example.cyclistance.feature_messaging.presentation.messaging_conversation.state
+package com.example.cyclistance.feature_messaging.presentation.messaging_main_screen.state
 
 import android.os.Parcelable
 import com.example.cyclistance.core.utils.annotations.StableState
 import com.example.cyclistance.feature_messaging.domain.model.ui.MessageConversation
+import com.example.cyclistance.feature_messaging.domain.model.ui.MessagesModel
 import kotlinx.parcelize.Parcelize
 
 @Parcelize
 @StableState
-data class MessagingConversationState(
-    val conversation: MessageConversation = MessageConversation()
+data class MessagingState(
+    val conversation: MessageConversation = MessageConversation(),
+    val messagesModel: MessagesModel = MessagesModel()
 ) : Parcelable
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagingConversationUiState.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagingConversationUiState.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/state/MessagingUiState.kt
rename from app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagingConversationUiState.kt
rename to app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/state/MessagingUiState.kt
--- a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_conversation/state/MessagingConversationUiState.kt	(revision c9cf29066d03f2255d5df21f2306f599c2a3e47c)
+++ b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/state/MessagingUiState.kt	(date 1689293152261)
@@ -1,15 +1,19 @@
-package com.example.cyclistance.feature_messaging.presentation.messaging_conversation.state
+package com.example.cyclistance.feature_messaging.presentation.messaging_main_screen.state
 
 import android.os.Parcelable
 import androidx.compose.ui.text.input.TextFieldValue
-import com.example.cyclistance.core.utils.annotations.StableState
+import com.example.cyclistance.feature_messaging.domain.model.ui.MessagesModel
+import com.google.android.material.bottomsheet.BottomSheetBehavior.StableState
 import kotlinx.parcelize.Parcelize
 import kotlinx.parcelize.RawValue
 
+
 @Parcelize
 @StableState
-data class MessagingConversationUiState(
+data class MessagingUiState(
+    val messages: MessagesModel = MessagesModel(),
     val messageAreaExpanded: Boolean = false,
+    val selectedConversationId: String? = null,
     val chatItemSelectedIndex: Int = -1,
     val message: @RawValue TextFieldValue = TextFieldValue("")
 ) : Parcelable
\ No newline at end of file
Index: app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/event/MessagingUiEvent.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/event/MessagingUiEvent.kt b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/event/MessagingUiEvent.kt
new file mode 100644
--- /dev/null	(date 1689293152234)
+++ b/app/src/main/java/com/example/cyclistance/feature_messaging/presentation/messaging_main_screen/event/MessagingUiEvent.kt	(date 1689293152234)
@@ -0,0 +1,12 @@
+package com.example.cyclistance.feature_messaging.presentation.messaging_main_screen.event
+
+import androidx.compose.ui.text.input.TextFieldValue
+
+sealed class MessagingUiEvent {
+    data class OnMessageClicked(val messageId: String) : MessagingUiEvent()
+    object ToggleMessageArea : MessagingUiEvent()
+    object ResetSelectedIndex : MessagingUiEvent()
+    object CloseMessagingConversationDialog : MessagingUiEvent()
+    data class SelectChatItem(val index: Int) : MessagingUiEvent()
+    data class OnChangeMessage(val message: TextFieldValue) : MessagingUiEvent()
+}
